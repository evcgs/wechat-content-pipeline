# 完整内容生产工作流（10步）

本文档详细说明微信公众号内容生产的完整 10 步流程。

---

## 完整流程概览

```
1. 选题确认
   ↓
2. 创意点提炼
   ↓
3. 证据链整理
   ↓
4. 大纲搭建
   ↓
5. 写文章（初稿）
   ↓
6. 搜索验证
   ↓
7. 生成图片
   ↓
8. 插入图片/更新文章
   ↓
9. 发布前检查环节（新增！）
   ↓
10. 发布
```

---

## 详细步骤

### 第 1 步：选题确认

**目标：** 确定文章的选题方向

**输出文件：** `选题/YYYY-MM-DD_选题名称_选题确认.md`

**关键内容：**
- 多选题方向（3-4个方向供选择）
- 每个方向的核心问题
- 目标读者
- 创意点清单（已有素材、还缺素材、优先级）
- 选题亮点（冲突感、视角多元、有深度等）

**模板示例：**
```markdown
# [选题名称]：选题确认

## 选题方向一（深度分析类）

### 1. 选题方向
行业底层逻辑/深度分析类

### 2. 核心问题
1. [问题1]
2. [问题2]
3. [问题3]

### 3. 目标读者
- [读者1]
- [读者2]

### 4. 创意点清单
| 创意点 | 已有素材 | 还缺素材 | 优先级 |
|--------|----------|----------|--------|
| 1. ... | ... | ... | 高 |

### 5. 选题亮点
- [亮点1]
- [亮点2]
```

---

### 第 2 步：创意点提炼

**目标：** 提炼 5 个核心创意点，每个带金句

**输出文件：** `创意点/YYYY-MM-DD_选题名称_创意点提炼.md`

**关键内容：**
- 5 个核心创意点
- 每个创意点的详细说明
- 每个创意点的金句
- 配图建议

**模板示例：**
```markdown
# [选题名称]：创意点提炼

## 创意点 1：[创意点名称]

**金句：** [金句内容]

**详细说明：**
- [说明1]
- [说明2]

**配图建议：** [配图描述]

---

## 创意点 2：[创意点名称]

（重复上述结构）
```

---

### 第 3 步：证据链整理

**目标：** 为每个创意点整理 2-3 个证据，带来源

**输出文件：** `证据链/YYYY-MM-DD_选题名称_证据链整理.md`

**关键内容：**
- 每个创意点对应的证据
- 每个证据的来源（WHO、盖茨基金会、公司公开信息、行业报告等）
- 证据的具体数据/内容

**模板示例：**
```markdown
# [选题名称]：证据链整理

## 创意点 1 的证据

### 证据 1
**来源：** [来源]
**内容：** [具体数据/内容]

### 证据 2
**来源：** [来源]
**内容：** [具体数据/内容]

---

## 创意点 2 的证据

（重复上述结构）
```

---

### 第 4 步：大纲搭建

**目标：** 搭建三级大纲，约 2500-3000 字

**输出文件：** `大纲/YYYY-MM-DD_选题名称_大纲搭建.md`

**关键内容：**
- 一级标题（6-8个）
- 二级标题（每个一级标题下 2-3个）
- 三级标题（每个二级标题下 1-2个）
- 预估字数
- 结构说明（开头钩子→概念/背景→三层论证→对比/延伸→启示/趋势→结尾升华）

**模板示例：**
```markdown
# [选题名称]：大纲搭建

## 预估字数
约 2850 字

## 文章结构
1. 开头钩子
2. 概念/背景
3. 三层论证
4. 对比/延伸
5. 启示/趋势
6. 结尾升华

## 详细大纲

### 一、[一级标题]（约 XX 字）
#### 1.1 [二级标题]
##### 1.1.1 [三级标题]
##### 1.1.2 [三级标题]
#### 1.2 [二级标题]

### 二、[一级标题]（约 XX 字）
（重复上述结构）
```

---

### 第 5 步：写文章（初稿）

**目标：** 根据大纲写初稿

**输出文件：** `已发布/YYYY-MM-DD_选题名称_深度分析类.md`

**关键内容：**
- 完整正文
- 严格区分阶段（如需要）
- 配图建议（封面图+内文图 1-4）

**格式要求：**
```markdown
# 文章标题

正文内容...

## 配图建议

### 封面图（横幅 2560x1440）
[配图描述]

### 内文图 1（1024x1024）
[配图描述]
```

---

### 第 6 步：搜索验证

**目标：** 使用 SerpAPI 搜索验证所有信息

**输出：** 更新后的文章

**关键内容：**
- 搜索所有竞品信息
- 验证公司成立时间、产品发布时间
- 修正不准确的时间点
- 更新文章中的所有时间线

**搜索示例：**
```
智诊科技 发布时间
腾讯觅影 成立时间 三类证
推想医疗 2024年4月 三类证
...
```

---

### 第 7 步：生成图片

**目标：** 使用火山引擎生成配图

**输出文件：** `images/` 目录下的图片

**关键内容：**
- 封面图（2560x1440）
- 内文图 1-4（2560x1440）
- ⚠️ 重要：最小 3,686,400 像素，推荐 2560x1440
- ⚠️ Logo：用彩色方块代替，避免错误

**提示词示例：**
```
封面图：[文章标题]，半写实+科技感风格，[画面描述]，横幅构图，宽高比16:9，专业信息图表风格

内文图：[图表主题]，清晰的[布局]，[具体内容]，配色：[配色方案]，清晰无重影，专业信息图表风格，扁平化设计
```

---

### 第 8 步：插入图片/更新文章

**目标：** 把生成的图片插入文章

**输出文件：** `已发布/YYYY-MM-DD_选题名称_深度分析类_publish.md`

**关键内容：**
- 插入所有图片
- 添加 frontmatter（title + cover，必填！）
- 检查所有图片路径正确

**格式要求：**
```markdown
---
title: 文章标题（必填）
cover: ./images/cover.png（必填）
---

# 正文开始

![封面图](./images/cover.png)

内容...

![内文图1](./images/image1.png)
```

---

### 第 9 步：发布

**目标：** 发布到微信公众号草稿箱

**工具：** wenyan-cli

**命令：**
```bash
wechat-pipeline publish --file ./已发布/YYYY-MM-DD_选题名称_深度分析类_publish.md
```

**前置检查：**
- ✅ IP 已添加到微信公众号白名单
- ✅ AppID 和 AppSecret 已配置
- ✅ 文章有 title 和 cover frontmatter
- ✅ 所有图片路径正确

---

## 目录结构

```
content/
├── 选题/
│   └── YYYY-MM-DD_选题名称_选题确认.md
├── 创意点/
│   └── YYYY-MM-DD_选题名称_创意点提炼.md
├── 证据链/
│   └── YYYY-MM-DD_选题名称_证据链整理.md
├── 大纲/
│   └── YYYY-MM-DD_选题名称_大纲搭建.md
├── 草稿/
│   └── ...
└── 已发布/
    ├── YYYY-MM-DD_选题名称_深度分析类.md
    └── YYYY-MM-DD_选题名称_深度分析类_publish.md

images/
├── cover.png
├── image1.png
├── image2.png
├── image3.png
└── image4.png
```

---

## 使用 wechat-content-pipeline

### 完整流水线（推荐）

```bash
wechat-pipeline pipeline --article ./已发布/my-article_publish.md
```

### 分步执行

```bash
# 第 6 步：搜索验证
wechat-pipeline search --article ./已发布/my-article.md

# 第 7 步：生成图片
wechat-pipeline image --article ./已发布/my-article.md

# 第 9 步：发布
wechat-pipeline publish --file ./已发布/my-article_publish.md
```

---

## 模板文件

项目提供了完整的模板文件，位于 `templates/workflow/` 目录：

- `01-topic.md` - 选题确认模板
- `02-ideas.md` - 创意点提炼模板
- `03-evidence.md` - 证据链整理模板
- `04-outline.md` - 大纲搭建模板
- `05-article.md` - 文章初稿模板
- `09-publish.md` - 发布版本模板

直接复制使用即可！
